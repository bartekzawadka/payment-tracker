version: "3.7"

networks:
    paymenttracker-integration:
        name: paymenttracker-integration

services: 
    payment-tracker-integration-db:
        networks: 
            - paymenttracker-integration
        image: mysql:5.6
        restart: always
        container_name: payment-tracker-integration-db
        command: mysqld --character-set-server=utf8 --collation-server=utf8_unicode_ci --init-connect='SET NAMES UTF8;' --innodb-flush-log-at-trx-commit=0
        ports:
        - 9999:3306
        environment:
        - MYSQL_ROOT_PASSWORD=1234
    payment-tracker-integration-tests:
        image: payment-tracker-integration-tests
        container_name: payment-tracker-integration-tests
        build:
            context: ../../.
            dockerfile: Tests/Docker/Dockerfile
        depends_on:
            - payment-tracker-integration-db
        networks: 
            - paymenttracker-integration
